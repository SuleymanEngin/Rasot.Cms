È
7D:\WorkSpace\Rasot\src\Library\Rasot.Data\IDbContext.cs
	namespace 	
Rasot
 
. 
Data 
{ 
public		 

	interface		 

IDbContext		 
{

 
DbSet 
< 
T 
> 
Set 
< 
T 
> 
( 
) 
where 
T  !
:" #

BaseEntity$ .
;. /
int 
SaveChanges 
( 
) 
; 
} 
} Ï
LD:\WorkSpace\Rasot\src\Library\Rasot.Data\Mappings\Categories\CategoryMap.cs
	namespace 	
Rasot
 
. 
Data 
. 
Mappings 
. 

Categories (
{ 
public 

class 
CategoryMap 
: $
IEntityTypeConfiguration 7
<7 8
Category8 @
>@ A
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
Category		0 8
>		8 9
builder		: A
)		A B
{

 	
builder 
. 
ToTable 
( 
$str &
)& '
;' (
builder 
. 
HasKey 
( 
p 
=> 
p  !
.! "
Id" $
)$ %
;% &
} 	
} 
} ø
UD:\WorkSpace\Rasot\src\Library\Rasot.Data\Mappings\Contents\PostCategoryMappingMap.cs
	namespace 	
Rasot
 
. 
Data 
. 
Mappings 
. 
Contents &
{ 
public 

class "
PostCategoryMappingMap '
:( )$
IEntityTypeConfiguration* B
<B C
PostCategoryMappingC V
>V W
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
PostCategoryMapping		0 C
>		C D
builder		E L
)		L M
{

 	
builder 
. 
ToTable 
( 
$str 1
)1 2
;2 3
builder 
. 
HasKey 
( 
p 
=> 
p  !
.! "
Id" $
)$ %
;% &
builder 
. 
HasOne 
( 
p 
=> 
p  !
.! "
Category" *
)* +
.+ ,
WithMany, 4
(4 5
)5 6
.6 7
HasForeignKey7 D
(D E
pE F
=>G I
pJ K
.K L

CategoryIdL V
)V W
;W X
builder 
. 
HasOne 
( 
p 
=> 
p  !
.! "
Post" &
)& '
.' (
WithMany( 0
(0 1
p1 2
=>3 5
p6 7
.7 8
PostCategories8 F
)F G
.G H
HasForeignKeyH U
(U V
pV W
=>X Z
p[ \
.\ ]
PostId] c
)c d
;d e
} 	
} 
} ù
FD:\WorkSpace\Rasot\src\Library\Rasot.Data\Mappings\Contents\PostMap.cs
	namespace 	
Rasot
 
. 
Data 
. 
Mappings 
. 
Contents &
{ 
public 

class 
PostMap 
: $
IEntityTypeConfiguration 3
<3 4
Post4 8
>8 9
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
Post		0 4
>		4 5
builder		6 =
)		= >
{

 	
builder 
. 
ToTable 
( 
$str "
)" #
;# $
builder 
. 
HasKey 
( 
p 
=> 
p  !
.! "
Id" $
)$ %
;% &
builder 
. 
Ignore 
( 
p 
=> 
p  !
.! "
PostCategories" 0
)0 1
;1 2
} 	
} 
} Í
KD:\WorkSpace\Rasot\src\Library\Rasot.Data\Mappings\Customers\CustomerMap.cs
	namespace 	
Rasot
 
. 
Data 
. 
Mappings 
. 
	Customers '
{ 
public 

class 
CustomerMap 
: $
IEntityTypeConfiguration 7
<7 8
Customer8 @
>@ A
{ 
public		 
void		 
	Configure		 
(		 
EntityTypeBuilder		 /
<		/ 0
Customer		0 8
>		8 9
builder		: A
)		A B
{

 	
builder 
. 
ToTable 
( 
$str &
)& '
;' (
builder 
. 
HasKey 
( 
p 
=> 
p  !
.! "
Id" $
)$ %
;% &
} 	
} 
} Æ
TD:\WorkSpace\Rasot\src\Library\Rasot.Data\Migrations\20181227202619_InitalProject.cs
	namespace 	
Rasot
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
InitalProject &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
CreateTable		 (
(		( )
name

 
:

 
$str

  
,

  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 9
,9 :
true; ?
)? @
,@ A
Email 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
,@ A
Password 
= 
table $
.$ %
Column% +
<+ ,
string, 2
>2 3
(3 4
nullable4 <
:< =
true> B
)B C
,C D
PasswordSalt  
=! "
table# (
.( )
Column) /
</ 0
string0 6
>6 7
(7 8
nullable8 @
:@ A
trueB F
)F G
,G H
PasswordFormatType &
=' (
table) .
.. /
Column/ 5
<5 6
int6 9
>9 :
(: ;
nullable; C
:C D
falseE J
)J K
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str  
)  !
;! "
} 	
} 
}   ç
TD:\WorkSpace\Rasot\src\Library\Rasot.Data\Migrations\20181228202549_PageEntityAdd.cs
	namespace 	
Rasot
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
PageEntityAdd &
:' (
	Migration) 2
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
CreateTable		 (
(		( )
name

 
:

 
$str

 
,

 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 9
,9 :
true; ?
)? @
,@ A
Title 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% .
,. /
x0 1
=>2 4
x5 6
.6 7
Id7 9
)9 :
;: ;
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
) 
; 
} 	
} 
} »
XD:\WorkSpace\Rasot\src\Library\Rasot.Data\Migrations\20181228203533_PageReplaceToPost.cs
	namespace 	
Rasot
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
PageReplaceToPost *
:+ ,
	Migration- 6
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	DropTable		 &
(		& '
name

 
:

 
$str

 
)

 
;

 
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str 
, 
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 9
,9 :
true; ?
)? @
,@ A
Title 
= 
table !
.! "
Column" (
<( )
string) /
>/ 0
(0 1
nullable1 9
:9 :
true; ?
)? @
,@ A
Content 
= 
table #
.# $
Column$ *
<* +
string+ 1
>1 2
(2 3
nullable3 ;
:; <
true= A
)A B
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% .
,. /
x0 1
=>2 4
x5 6
.6 7
Id7 9
)9 :
;: ;
} 
) 
; 
} 	
	protected 
override 
void 
Down  $
($ %
MigrationBuilder% 5
migrationBuilder6 F
)F G
{ 	
migrationBuilder 
. 
	DropTable &
(& '
name 
: 
$str 
) 
; 
migrationBuilder   
.   
CreateTable   (
(  ( )
name!! 
:!! 
$str!! 
,!! 
columns"" 
:"" 
table"" 
=>"" !
new""" %
{## 
Id$$ 
=$$ 
table$$ 
.$$ 
Column$$ %
<$$% &
int$$& )
>$$) *
($$* +
nullable$$+ 3
:$$3 4
false$$5 :
)$$: ;
.%% 

Annotation%% #
(%%# $
$str%%$ 9
,%%9 :
true%%; ?
)%%? @
,%%@ A
Title&& 
=&& 
table&& !
.&&! "
Column&&" (
<&&( )
string&&) /
>&&/ 0
(&&0 1
nullable&&1 9
:&&9 :
true&&; ?
)&&? @
}'' 
,'' 
constraints(( 
:(( 
table(( "
=>((# %
{)) 
table** 
.** 

PrimaryKey** $
(**$ %
$str**% .
,**. /
x**0 1
=>**2 4
x**5 6
.**6 7
Id**7 9
)**9 :
;**: ;
}++ 
)++ 
;++ 
},, 	
}-- 
}.. „:
XD:\WorkSpace\Rasot\src\Library\Rasot.Data\Migrations\20181229162123_CategoryEntityAdd.cs
	namespace 	
Rasot
 
. 
Data 
. 

Migrations 
{ 
public 

partial 
class 
CategoryEntityAdd *
:+ ,
	Migration- 6
{ 
	protected 
override 
void 
Up  "
(" #
MigrationBuilder# 3
migrationBuilder4 D
)D E
{ 	
migrationBuilder		 
.		 
	AddColumn		 &
<		& '
string		' -
>		- .
(		. /
name

 
:

 
$str

 
,

 
table 
: 
$str !
,! "
nullable 
: 
true 
) 
;  
migrationBuilder 
. 
CreateTable (
(( )
name 
: 
$str  
,  !
columns 
: 
table 
=> !
new" %
{ 
Id 
= 
table 
. 
Column %
<% &
int& )
>) *
(* +
nullable+ 3
:3 4
false5 :
): ;
. 

Annotation #
(# $
$str$ 9
,9 :
true; ?
)? @
,@ A
Name 
= 
table  
.  !
Column! '
<' (
string( .
>. /
(/ 0
nullable0 8
:8 9
true: >
)> ?
,? @
Deleted 
= 
table #
.# $
Column$ *
<* +
short+ 0
>0 1
(1 2
nullable2 :
:: ;
false< A
)A B
,B C
ParentCategoryId $
=% &
table' ,
., -
Column- 3
<3 4
int4 7
>7 8
(8 9
nullable9 A
:A B
falseC H
)H I
} 
, 
constraints 
: 
table "
=># %
{ 
table 
. 

PrimaryKey $
($ %
$str% 2
,2 3
x4 5
=>6 8
x9 :
.: ;
Id; =
)= >
;> ?
table 
. 

ForeignKey $
($ %
name 
: 
$str E
,E F
column 
: 
x  !
=>" $
x% &
.& '
ParentCategoryId' 7
,7 8
principalTable &
:& '
$str( 2
,2 3
principalColumn '
:' (
$str) -
,- .
onDelete    
:    !
ReferentialAction  " 3
.  3 4
Cascade  4 ;
)  ; <
;  < =
}!! 
)!! 
;!! 
migrationBuilder## 
.## 
CreateTable## (
(##( )
name$$ 
:$$ 
$str$$ +
,$$+ ,
columns%% 
:%% 
table%% 
=>%% !
new%%" %
{&& 
Id'' 
='' 
table'' 
.'' 
Column'' %
<''% &
int''& )
>'') *
(''* +
nullable''+ 3
:''3 4
false''5 :
)'': ;
.(( 

Annotation(( #
(((# $
$str(($ 9
,((9 :
true((; ?
)((? @
,((@ A
PostId)) 
=)) 
table)) "
.))" #
Column))# )
<))) *
int))* -
>))- .
()). /
nullable))/ 7
:))7 8
false))9 >
)))> ?
,))? @

CategoryId** 
=**  
table**! &
.**& '
Column**' -
<**- .
int**. 1
>**1 2
(**2 3
nullable**3 ;
:**; <
false**= B
)**B C
}++ 
,++ 
constraints,, 
:,, 
table,, "
=>,,# %
{-- 
table.. 
... 

PrimaryKey.. $
(..$ %
$str..% =
,..= >
x..? @
=>..A C
x..D E
...E F
Id..F H
)..H I
;..I J
table// 
.// 

ForeignKey// $
(//$ %
name00 
:00 
$str00 J
,00J K
column11 
:11 
x11  !
=>11" $
x11% &
.11& '

CategoryId11' 1
,111 2
principalTable22 &
:22& '
$str22( 2
,222 3
principalColumn33 '
:33' (
$str33) -
,33- .
onDelete44  
:44  !
ReferentialAction44" 3
.443 4
Cascade444 ;
)44; <
;44< =
table55 
.55 

ForeignKey55 $
(55$ %
name66 
:66 
$str66 B
,66B C
column77 
:77 
x77  !
=>77" $
x77% &
.77& '
PostId77' -
,77- .
principalTable88 &
:88& '
$str88( .
,88. /
principalColumn99 '
:99' (
$str99) -
,99- .
onDelete::  
:::  !
ReferentialAction::" 3
.::3 4
Cascade::4 ;
)::; <
;::< =
};; 
);; 
;;; 
migrationBuilder== 
.== 
CreateIndex== (
(==( )
name>> 
:>> 
$str>> 4
,>>4 5
table?? 
:?? 
$str?? !
,??! "
column@@ 
:@@ 
$str@@ *
)@@* +
;@@+ ,
migrationBuilderBB 
.BB 
CreateIndexBB (
(BB( )
nameCC 
:CC 
$strCC 9
,CC9 :
tableDD 
:DD 
$strDD ,
,DD, -
columnEE 
:EE 
$strEE $
)EE$ %
;EE% &
migrationBuilderGG 
.GG 
CreateIndexGG (
(GG( )
nameHH 
:HH 
$strHH 5
,HH5 6
tableII 
:II 
$strII ,
,II, -
columnJJ 
:JJ 
$strJJ  
)JJ  !
;JJ! "
}KK 	
	protectedMM 
overrideMM 
voidMM 
DownMM  $
(MM$ %
MigrationBuilderMM% 5
migrationBuilderMM6 F
)MMF G
{NN 	
migrationBuilderOO 
.OO 
	DropTableOO &
(OO& '
namePP 
:PP 
$strPP +
)PP+ ,
;PP, -
migrationBuilderRR 
.RR 
	DropTableRR &
(RR& '
nameSS 
:SS 
$strSS  
)SS  !
;SS! "
migrationBuilderUU 
.UU 

DropColumnUU '
(UU' (
nameVV 
:VV 
$strVV 
,VV 
tableWW 
:WW 
$strWW !
)WW! "
;WW" #
}XX 	
}YY 
}ZZ ‡
;D:\WorkSpace\Rasot\src\Library\Rasot.Data\RasotDbContext.cs
	namespace 	
Rasot
 
. 
Data 
{ 
public		 

class		 
RasotDbContext		 
:		  
	DbContext		  )
,		) *

IDbContext		* 4
{

 
public 
RasotDbContext 
( 
DbContextOptions .
<. /
RasotDbContext/ =
>= >
options? F
)F G
:G H
baseH L
(L M
optionsM T
)T U
{ 	
} 	
	protected 
override 
void 
OnConfiguring  -
(- .#
DbContextOptionsBuilder. E
optionsBuilderF T
)T U
{ 	
optionsBuilder 
. 
UseMySQL #
(# $
$str$ m
)m n
;n o
base 
. 
OnConfiguring 
( 
optionsBuilder -
)- .
;. /
} 	
public 
new 
DbSet 
< 
TEntity !
>! "
Set# &
<& '
TEntity' .
>. /
(/ 0
)0 1
where2 7
TEntity8 ?
:? @

BaseEntity@ J
{ 	
return 
base 
. 
Set 
< 
TEntity #
># $
($ %
)% &
;& '
} 	
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /
CustomerMap0 ;
(; <
)< =
)= >
;> ?
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /
PostMap0 7
(7 8
)8 9
)9 :
;: ;
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /
CategoryMap0 ;
(; <
)< =
)= >
;> ?
modelBuilder 
. 
ApplyConfiguration +
(+ ,
new, /"
PostCategoryMappingMap0 F
(F G
)G H
)H I
;I J
base!! 
.!! 
OnModelCreating!!  
(!!  !
modelBuilder!!! -
)!!- .
;!!. /
}"" 	
}## 
}$$ Š:
7D:\WorkSpace\Rasot\src\Library\Rasot.Data\Repository.cs
	namespace 	
Rasot
 
. 
Data 
{		 
public

 

class

 

Repository

 
<

 
T

 
>

 
:

  
IRepository

! ,
<

, -
T

- .
>

. /
where

0 5
T

6 7
:

8 9

BaseEntity

: D
{ 
private 
readonly 

IDbContext #

_DbContext$ .
;. /
private 
DbSet 
< 
T 
> 
	_entities "
;" #
	protected 
virtual 
DbSet 
<  
T  !
>! "
Entities# +
{ 	
get 
{ 
if 
( 
	_entities  
==  "
null" &
)& '
{ 
	_entities !
=" #

_DbContext$ .
.. /
Set/ 2
<2 3
T3 4
>4 5
(5 6
)6 7
;7 8
} 
return 
	_entities $
;$ %
} 
} 	
public 

Repository 
( 

IDbContext $
rasotDbContext% 3
)3 4
{ 	
this 
. 

_DbContext 
= 
rasotDbContext ,
;, -
}   	
public!! 
virtual!! 

IQueryable!! !
<!!! "
T!!" #
>!!# $
Table!!% *
=>!!+ -
Entities!!. 6
;!!6 7
public## 
virtual## 

IQueryable## !
<##! "
T##" #
>### $
TableAsNoTraking##% 5
=>##6 8
Entities##9 A
.##A B
AsNoTracking##B N
(##N O
)##O P
;##P Q
public%% 
virtual%% 
void%% 
Delete%% "
(%%" #
int%%# &
Id%%' )
)%%) *
{&& 	
if'' 
('' 
Id'' 
=='' 
$num'' 
)'' 
{(( 
throw)) 
new)) '
ArgumentOutOfRangeException)) 5
())5 6
$"))6 8+
Id parameter not available Zero))8 W
"))W X
)))X Y
;))Y Z
}** 
var,, 
item,, 
=,, 
Find,, 
(,, 
Id,, 
),, 
;,,  
Delete-- 
(-- 
item-- 
)-- 
;-- 
}.. 	
public00 
virtual00 
void00 
Delete00 "
(00" #
T00# $
item00% )
)00) *
{11 	
if22 
(22 
item22 
==22 
null22 
)22 
{33 
throw44 
new44 !
ArgumentNullException44 /
(44/ 0
$"440 2
Entity not null442 A
"44A B
)44B C
;44C D
}55 
Entities77 
.77 
Remove77 
(77 
item77  
)77  !
;77! "

_DbContext88 
.88 
SaveChanges88 "
(88" #
)88# $
;88$ %
}99 	
public;; 
virtual;; 
T;; 
Find;; 
(;; 
int;; !
Id;;" $
);;$ %
{<< 	
return== 
Entities== 
.== 
Find==  
(==  !
Id==! #
)==# $
;==$ %
}>> 	
public@@ 
virtual@@ 
void@@ 
Insert@@ "
(@@" #
T@@# $
item@@% )
)@@) *
{AA 	
ifBB 
(BB 
itemBB 
==BB 
nullBB 
)BB 
{CC 
throwDD 
newDD !
ArgumentNullExceptionDD /
(DD/ 0
$"DD0 2
Entity not nullDD2 A
"DDA B
)DDB C
;DDC D
}EE 
EntitiesGG 
.GG 
AddGG 
(GG 
itemGG 
)GG 
;GG 

_DbContextHH 
.HH 
SaveChangesHH "
(HH" #
)HH# $
;HH$ %
}II 	
publicKK 
virtualKK 
voidKK 
UpdateKK "
(KK" #
TKK# $
itemKK% )
)KK) *
{LL 	
ifMM 
(MM 
itemMM 
==MM 
nullMM 
)MM 
{NN 
throwOO 
newOO !
ArgumentNullExceptionOO /
(OO/ 0
$"OO0 2
Entity not nullOO2 A
"OOA B
)OOB C
;OOC D
}PP 
EntitiesRR 
.RR 
UpdateRR 
(RR 
itemRR  
)RR  !
;RR! "

_DbContextSS 
.SS 
SaveChangesSS "
(SS" #
)SS# $
;SS$ %
}TT 	
publicVV 
virtualVV 
voidVV 
InsertRangeVV '
(VV' (
IEnumerableVV( 3
<VV3 4
TVV4 5
>VV5 6
itemsVV7 <
)VV< =
{WW 	
ifXX 
(XX 
itemsXX 
==XX 
nullXX 
)XX 
{YY 
throwZZ 
newZZ !
ArgumentNullExceptionZZ /
(ZZ/ 0
$"ZZ0 2 
Entity List not nullZZ2 F
"ZZF G
)ZZG H
;ZZH I
}[[ 
Entities\\ 
.\\ 
AddRange\\ 
(\\ 
items\\ #
)\\# $
;\\$ %

_DbContext]] 
.]] 
SaveChanges]] "
(]]" #
)]]# $
;]]$ %
}^^ 	
public`` 
virtual`` 
void`` 
UpdateRange`` '
(``' (
IEnumerable``( 3
<``3 4
T``4 5
>``5 6
items``7 <
)``< =
{aa 	
ifbb 
(bb 
itemsbb 
==bb 
nullbb 
)bb 
{cc 
throwdd 
newdd !
ArgumentNullExceptiondd /
(dd/ 0
$"dd0 2 
Entity List not nulldd2 F
"ddF G
)ddG H
;ddH I
}ee 
Entitiesgg 
.gg 
UpdateRangegg  
(gg  !
itemsgg! &
)gg& '
;gg' (

_DbContexthh 
.hh 
SaveChangeshh "
(hh" #
)hh# $
;hh$ %
}ii 	
publickk 
virtualkk 
voidkk 
DeleteRangekk '
(kk' (
IEnumerablekk( 3
<kk3 4
Tkk4 5
>kk5 6
itemskk7 <
)kk< =
{ll 	
ifmm 
(mm 
itemsmm 
==mm 
nullmm 
)mm 
{nn 
throwoo 
newoo !
ArgumentNullExceptionoo /
(oo/ 0
$"oo0 2 
Entity List not nulloo2 F
"ooF G
)ooG H
;ooH I
}pp 
Entitiesqq 
.qq 
RemoveRangeqq  
(qq  !
itemsqq! &
)qq& '
;qq' (

_DbContextrr 
.rr 
SaveChangesrr "
(rr" #
)rr# $
;rr$ %
}ss 	
}tt 
}uu 